# 豆瓣租房帖子筛选器

豆瓣小组讨论是个找房子租的好地方，但是目前中介和公寓的人发帖太多，要找到真实的房东的帖子很困难
作者编写这个小工具就是用来筛选过滤无效地帖子

**仅限于个人找房应用，禁止商用！**

*这个筛选器具备如下功能：

1）可视化界面，可展示经过筛选的帖子、中介贴、垃圾帖（包含特定关键词）和已读贴
2）一键抓取多个小组的帖子，并自动合并同一作者在不同小组内的相似帖子
3）自动抓取至上次浏览的帖子时间（也可自行设定终止条件）
4）自动合并已读帖子（所以看到有好的了，记得豆瓣先收藏，因为读过的不会再更新显示）
5）界面中双击可打开帖子连接，并自动标记为已读，右键可标记已读或将帖子作者标记为中介
6）自动识别中介（可根据发帖数量和帖子回复数筛选），支持手动添加中介
7）支持手动添加过滤关键词
8）点击表头可排序帖子（默认按时间排序）


*可能还可以增加的功能：

1）增加一个删除超过若干天的帖子记录功能
2）添加ctrl+F支持，用于搜索帖子
3）添加一个收藏功能



## 使用方法

这个小工具基于Python编写，需要一个第三方库：Requests_html
作者python版本为 3.7.6，其他版本未测试

在srcs目录下运行 top_win.py 即可打开筛选器界面

*界面左边区域

  四个标签页，每个标签页内是列表形式的帖子，点击帖子即可打开帖子链接，打开过的帖子会在标题中加入 rd--标识，点击重新筛选帖子按键后，该帖子会被移送到已读标签页中

*界面右上角-抓取帖子设置

  输入豆瓣小组id: 可在浏览器中打开某个小组，例如https://www.douban.com/group/551531/discussion?start=0
                 其id为551531，这里支持输入多个id，用, 隔开即可
  输入截至时间： 手动指定抓取帖子的截至时间 格式为 “mon-day hour:min” 例如 04-02 00：00
  输入最大抓取页数：指定最多抓多少页，一般豆瓣帖子是25条记录一页
  复选框-抓取至上次时间：选中则自动抓取至本地记录中最新回帖的时间，否则按上面输入的截至时间抓取
  复选框-限制最大页数：选中则上面输入的最大页数有效

*界面右边-帖子过滤设置

  四个大的按钮按下后会弹出相应的列表，可在其中添加或删除相关信息
  最大发帖数： 设置自动判定中介时，发帖数的阈值，超过这个数则认为是中介
  最大回复数： 设置回复数阈值，超过阈值则认为是中介
  两个复选框用于指定是否应用对应条件筛选中介

界面右下角四个大按键，看名字就可以操作了
  其中 重新筛选帖子按键会根据筛选条件的设定重新筛选帖子，识别到的中介将在保存退出后保存到本地
  其中 保存并退出按键按下后会 选择是否保留中介和垃圾帖，建议保留垃圾帖和删除中介贴。

## 可能存在的问题
	抓贴的时候 403 错误，换个ip把
	本地记录太多了，卡的不行 打开records中的record.history文件，删掉一些太早的记录







